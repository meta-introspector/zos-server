# ZOS Network Configuration for solfunmeme account
# AGPL-3.0 License

[account]
name = "solfunmeme"
domain = "solfunmeme.com"
coordinator = "solana.solfunmeme.com"

[bootstrap]
# Primary bootstrap node (this Linux server)
primary_node = "solana.solfunmeme.com:4001"
backup_nodes = [
    "github.com/solfunmeme/zos-bootstrap",  # GitHub fallback
    "cloudflare-workers.solfunmeme.com"     # Cloudflare Workers fallback
]

[libp2p]
# Public network - open access
public_listen_addresses = [
    "/ip4/0.0.0.0/tcp/4001",
    "/ip4/0.0.0.0/udp/4001/quic-v1"
]
public_external_address = "/dns4/solana.solfunmeme.com/tcp/4001"

# Private network - PEM auth required
private_listen_addresses = [
    "/ip4/0.0.0.0/tcp/4002",
    "/ip4/0.0.0.0/udp/4002/quic-v1"
]
private_external_address = "/dns4/solana.solfunmeme.com/tcp/4002"

peer_discovery = true
mdns_enabled = true
kad_enabled = true

[networks]
# Public network configuration
[networks.public]
port = 4001
access_level = "public"
discovery_enabled = true
bootstrap_peers = []

# Private network configuration
[networks.private]
port = 4002
access_level = "root"
discovery_enabled = false
bootstrap_peers = []
require_pem_signature = true

[security]
# Use OCI PEM key as root authentication
root_key_path = "~/.solfunmeme-keys/oracle_key_copy.pem"
public_access_level = "limited"  # Public gets read-only access
root_access_level = "full"       # PEM key holders get full access
require_pem_auth = true
encryption_required = true
peer_scoring_enabled = true

[access_control]
# Public (no auth) - limited read access
public_permissions = [
    "read_network_info",
    "read_public_data",
    "join_as_observer"
]

# Root (PEM auth) - full control
root_permissions = [
    "deploy_nodes",
    "manage_network",
    "access_oracle_cloud",
    "coordinate_builds",
    "full_admin"
]
